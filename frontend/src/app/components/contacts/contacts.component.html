<!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ HEADER ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->

<app-header-logged></app-header-logged>

  <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ Messages ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->

<section>
  <div class="container py-4">
    <div class="row">
      <div class="col-md-12">
        <div class="card">
          <div class="card-body">
            <div class="row">

  <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ Search bar ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->

              <div class="input-group rounded mb-3">
                <input type="search" class="search form-control rounded" [(ngModel)]="searchContact" placeholder="Busca un contacte..." aria-label="Search" aria-describedby="search-addon"/>
                <span class="input-group-text border-0" id="search-addon">
                  <i class="fas fa-search"></i>
                </span>
              </div>

  <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ Petitions ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
              
              <div class="col-md-6 col-lg-5 col-xl-4 mb-1 mb-md-0" *ngIf="profileid == mycookie">
                <div class="p-3">
                  <h2 class="titles mx-2">Peticiones ({{requests.length}})</h2>
                  <div class="petitions">
                    <ul class="list-unstyled mb-0 col-12">
                      <li class="contact p-2">
                        <a *ngFor="let req of requests" class="d-flex justify-content-between">
                          <div class="d-flex">
                            <img [src]="'assets/photo/' + req.photoroute" alt="avatar" class="d-flex align-self-center me-3 rounded-circle" width="45" height="45" (click)="seeProfile(req._id)">
                            <div class="d-flex pt-1">
                              <p type="button" class="petition--name fw-bold mt-2" (click)="seeProfile(req._id)">{{req.username}}</p>
                            </div>
                          </div>
                          <div class="d-flex flex-row justify-content-end">
                            <button class="fw-bold mt-2 btn btn-success my-2 mx-2" (click)="acceptRequest(req._id)"><i class="fa-solid fa-check"></i></button><br>
                            <button class="fw-bold mt-2 btn btn-danger my-2"  (click)="denyRequest(req._id)"><i class="fa-solid fa-xmark"></i></button>
                          </div>
                        </a>
                      </li>
                    </ul>
                  </div>
                </div>
              </div>

  <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ Contacts ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->

              <div  class="col-md-6 col-lg-7 col-xl-8">
                <h2 class="titles mt-3">Contactos</h2>
                <div class="contacts">
                  <ul class="list-unstyled mb-0 col-10">
                    <li class="contact p-2 border-bottom">
                      <a *ngFor="let a of contacts | filter:searchContact" class="d-flex justify-content-between">
                        <div class="d-flex">
                          <img type="button" [src]="'assets/photo/' + a.photoroute" alt="" class="d-flex align-self-center me-3 rounded-circle" width="55" height="55" (click)="seeProfile(a._id)">
                          <div class="pt-1">
                            <p>{{a.length}}</p>
                            <p type="button" class="contacts--name fw-bold mb-0" (click)="seeProfile(a._id)">{{a.username}}</p>
                            <p class="contacts--bio small text-muted">{{a.biography}}</p>
                          </div>
                        </div>
                        <button *ngIf="a._id !== mycookie" class="btn btn-lg btn-success my-4" (click)="goMessages()">
                          <i class="fa fa-envelope"></i>
                        </button>
                      </a>
                    </li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>